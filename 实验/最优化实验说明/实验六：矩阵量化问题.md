# 实验六：矩阵量化问题

本实验为**数值处理实验**，目标是通过代码实现矩阵量化过程，
观察不同量化方式对数值精度的影响。

不涉及算法推导与理论分析，
**仅记录代码结构、实现思路与可调参数。**

---

## 对应代码

本实验代码实际完成于作业部分，对应路径为：

* [08_矩阵量化_1.py](/作业/08_矩阵量化/08_矩阵量化_1.py)
* [08_矩阵量化_2.py](/作业/08_矩阵量化/08_矩阵量化_2.py)
* [08_矩阵量化_3.py](/作业/08_矩阵量化/08_矩阵量化_3.py)
* [08_矩阵量化_4.py](/作业/08_矩阵量化/08_矩阵量化_4.py)


本实验日志仅作为**实现记录与使用说明**。

---

## 实验说明

通过对矩阵进行不同方式的量化与反量化，
对比量化前后数值变化及误差情况。

---

## 题目说明

实验六为**矩阵量化问题**，主要内容如下（依据课程 PPT）：

1. 给定浮点矩阵 (W)，按照课程中给出的**量化公式与反量化公式**，
   实现矩阵的量化（Quantization）与反量化（Dequantization）过程，
   并比较量化前后数值变化及误差情况。

2. 设定量化位宽（如 8-bit），根据矩阵最大值与最小值计算量化参数
   **缩放因子（scale）**与**零点（zero point）**，完成量化映射。

3. 在量化公式中引入可调参数 (a, b)，并在给定范围内调整其取值，
   以**最小化量化前后矩阵（或其线性变换）之间的均方误差（MSE）**。

4. 分别采用以下方法求解参数 (a, b) 的最优取值：

   * 一维搜索方法（如黄金分割法）
   * 梯度下降法
   * 小批量梯度下降法
   * 粒子群优化（PSO）方法

5. 在优化过程中，矩阵 (W) 与输入矩阵 (X) 均由程序随机生成，
   以量化前后的矩阵乘积 (XW) 与 (XW_q) 之间的误差作为损失函数。

本实验仅要求**实现与复现 PPT 中给出的计算流程与优化思路**，
不要求对量化理论或算法本身进行扩展、改写或性能对比分析。


---

## 实现思路（只说代码层面）

实验中主要包含以下步骤：

1. 构造或读取原始矩阵
2. 确定量化区间（最小值 / 最大值）
3. 计算量化参数（如 scale）
4. 执行量化操作
5. 执行反量化，恢复近似原始矩阵
6. 对比量化前后的数值差异

不同文件中对上述过程进行了**拆分或变形实现**，用于对比效果。

---

## 实际可改参数（最重要）

### 量化位宽 / 等级数

在代码中通常以如下形式出现（示意）：

```python
levels = 256
```

说明：

* `levels` 越大，量化精度越高
* `levels` 越小，量化误差越明显
* 修改该参数即可观察不同量化效果

---

### 量化区间（min / max）

常见形式如下：

```python
x_min = matrix.min()
x_max = matrix.max()
```

说明：

* 若改为固定区间，会直接影响量化结果
* 不同区间选择对应不同量化策略

---

### 输入矩阵本身

部分文件中直接定义了测试矩阵：

```python
matrix = np.array([...])
```

说明：

* 可直接替换矩阵内容
* 用于测试不同数值分布下的量化效果

---

## 输出结果

程序输出内容主要包括：

* 量化后的矩阵
* 反量化后的矩阵
* 与原矩阵的数值差异（或误差）

未对结果进行自动评估，仅用于人工对比观察。

---

## 备注

* 本实验为实现类实验，不涉及优化算法
* 不进行数学推导与复杂分析
* 本日志仅用于：

  * 对照代码
  * 标注可改参数
  * 方便后续直接复用或修改


